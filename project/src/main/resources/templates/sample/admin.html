<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<th:block th:replace="~{/layout/basic :: setContent(~{this::content})}">
    <th:block th:fragment="content">
        <!-- 관리자 -->
        <!-- ========== section start ========== -->
        <section class="section">
            <div class="container-fluid">
                <!-- ========== title-wrapper start ========== -->
                <div class="title-wrapper pt-30">
                    <div class="row align-items-center">
                        <div class="col-md-6">
                            <div class="title">
                                <h2>관리자 Dashboard</h2>
                            </div>
                        </div>
                        <!-- end col -->
                        <div class="col-md-6">
                            <div class="breadcrumb-wrapper">
                                <nav aria-label="breadcrumb">
                                    <ol class="breadcrumb">
                                        <li class="breadcrumb-item">
                                            <a href="#0">Dashboard</a>
                                        </li>
                                    </ol>
                                </nav>
                            </div>
                        </div>
                        <!-- end col -->
                    </div>
                    <!-- end row -->
                </div>
                <!-- ========== title-wrapper end ========== -->

                <div class="alert-box danger-alert pl-100">
                    <div class="left">
                        <h5 class="text-bold">!IMPORTANT!</h5>
                    </div>
                    <div class="alert">
                        <h4 class="alert-heading">중요 알림</h4>
                        <p class="text-medium">
                            승인 대기 중인 업체가 N건 있습니다.
                        </p>
                    </div>
                </div>
                <!-- end alert-box -->

                <div class="row">
                    <div class="col-xl-3 col-lg-4 col-sm-6">
                        <div class="icon-card mb-30">
                            <div class="icon purple">
                                <i class="lni lni-cart-full"></i>
                            </div>
                            <div class="content">
                                <h6 class="mb-10">진행 중인 생산 계획 수</h6>
                                <h3 class="text-bold mb-10">3</h3>
                                <p class="text-sm text-success">
                                    <span class="text-gray">더 보기</span>
                                </p>
                            </div>
                        </div>
                        <!-- End Icon Cart -->
                    </div>
                    <!-- End Col -->
                    <div class="col-xl-3 col-lg-4 col-sm-6">
                        <div class="icon-card mb-30">
                            <div class="icon primary">
                                <i class="lni lni-credit-cards"></i>
                            </div>
                            <div class="content">
                                <h6 class="mb-10">이번 달 발주 건수</h6>
                                <h3 class="text-bold mb-10">18</h3>
                                <p class="text-sm text-danger">
                                    <span class="text-gray">더 보기</span>
                                </p>
                            </div>
                        </div>
                        <!-- End Icon Cart -->
                    </div>
                    <!-- End Col -->
                    <div class="col-xl-3 col-lg-4 col-sm-6">
                        <div class="icon-card mb-30">
                            <div class="icon orange">
                                <i class="lni lni-user"></i>
                            </div>
                            <div class="content">
                                <h6 class="mb-10">이번 달 입고 건수</h6>
                                <h3 class="text-bold mb-10">3</h3>
                                <p class="text-sm text-danger">
                                    <span class="text-gray"> 더 보기</span>
                                </p>
                            </div>
                        </div>
                        <!-- End Icon Cart -->
                    </div>
                    <!-- End Col -->
                    <div class="col-xl-3 col-lg-4 col-sm-6">
                        <div class="icon-card mb-30">
                            <div class="icon success">
                                <i class="lni lni-dollar"></i>
                            </div>
                            <div class="content">
                                <h6 class="mb-10">이번달 입고 예정 건수</h6>
                                <h3 class="text-bold mb-10">15</h3>
                                <p class="text-sm text-success">
                                    <span class="text-gray">더 보기</span>
                                </p>
                            </div>
                        </div>
                        <!-- End Icon Cart -->
                    </div>
                    <!-- End Col -->
                </div>
                <!-- End Row -->
           <!-- End Row --> <div class="row">
            <div class="col-xl-3 col-lg-4 col-sm-6">
                <div class="icon-card mb-30">
                    <div class="icon purple">
                        <i class="lni lni-cart-full"></i>
                    </div>
                    <div class="content">
                        <h6 class="mb-10">입고 검수 예정 건수</h6>
                        <h3 class="text-bold mb-10">3</h3>
                        <p class="text-sm text-success">
                            <span class="text-gray">더 보기</span>
                        </p>
                    </div>
                </div>
                <!-- End Icon Cart -->
            </div>
            <!-- End Col -->
            <div class="col-xl-3 col-lg-4 col-sm-6">
                <div class="icon-card mb-30">
                    <div class="icon primary">
                        <i class="lni lni-credit-cards"></i>
                    </div>
                    <div class="content">
                        <h6 class="mb-10">대기 중인 출고 요청 건수</h6>
                        <h3 class="text-bold mb-10">5</h3>
                        <p class="text-sm text-danger">
                            <span class="text-gray">더 보기</span>
                        </p>
                    </div>
                </div>
                <!-- End Icon Cart -->
            </div>
            <!-- End Col -->
            <div class="col-xl-3 col-lg-4 col-sm-6">
                <div class="icon-card mb-30">
                    <div class="icon orange">
                        <i class="lni lni-user"></i>
                    </div>
                    <div class="content">
                        <h6 class="mb-10">승인된 출고 요청 건수</h6>
                        <h3 class="text-bold mb-10">3</h3>
                        <p class="text-sm text-danger">
                            <span class="text-gray"> 더 보기</span>
                        </p>
                    </div>
                </div>
                <!-- End Icon Cart -->
            </div>
            <!-- End Col -->
            <div class="col-xl-3 col-lg-4 col-sm-6">
                <div class="icon-card mb-30">
                    <div class="icon success">
                        <i class="lni lni-dollar"></i>
                    </div>
                    <div class="content">
                        <h6 class="mb-10">불출 완료된 건수</h6>
                        <h3 class="text-bold mb-10">15</h3>
                        <p class="text-sm text-success">
                            <span class="text-gray">더 보기</span>
                        </p>
                    </div>
                </div>
                <!-- End Icon Cart -->
            </div>
            <!-- End Col -->
        </div>
                <!-- 달력 -->
                <div class="row">
                    <div class="col-lg-5">
                        <div class="card-style calendar-card mb-30">
                            <h5>생산 계획 달력</h5>
                            <div id="calendar-mini"></div>
                        </div>
                    </div>
                </div>
                <!-- 달력 끝 -->
            </div>
            <!-- end container -->
        </section>
        <!-- ========== section end ========== -->

        <!-- ========== footer start =========== -->
        <footer class="footer">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-6 order-last order-md-first">
                        <div class="copyright text-center text-md-start">
                            <p class="text-sm">
                                Designed and Developed by
                                <a href="https://plainadmin.com" rel="nofollow" target="_blank">
                                    PlainAdmin
                                </a>
                            </p>
                        </div>
                    </div>
                    <!-- end col-->
                    <div class="col-md-6">
                        <div class="terms d-flex justify-content-center justify-content-md-end">
                            <a class="text-sm" href="#0">Term & Conditions</a>
                            <a class="text-sm ml-15" href="#0">Privacy & Policy</a>
                        </div>
                    </div>
                </div>
                <!-- end row -->
            </div>
            <!-- end container -->
        </footer>
        <!-- ========== footer end =========== -->

        <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.4/index.global.min.js"></script>

        <script>
            // FullCalendar 활성화 및 API 데이터 가져오기
            document.addEventListener("DOMContentLoaded", function () {
                var calendarMiniEl = document.getElementById("calendar-mini");

                var calendarMini = new FullCalendar.Calendar(calendarMiniEl, {
                    initialView: "dayGridMonth", // 월간 달력 보기
                    headerToolbar: {
                        start: "title", // 달력 제목
                        center: "",
                        end: "today prev,next" // 오늘, 이전, 다음 버튼
                    },
                    events: "/api/calendar/events", // ProductionPlan 데이터 가져오는 API 경로
                    eventContent: function(info) {
                        // 생산 수량을 표시하고 스타일을 설정
                        let color = info.event.extendedProps.color || "blue"; // 색상 지정
                        return {
                            html: `<div style="background-color:${color}; padding: 5px;">
                                      <b>${info.event.title}</b><br>
                                      <span>수량: ${info.event.extendedProps.quantity}</span>
                                   </div>`
                        };
                    },
                    eventClick: function(info) {
                        // 이벤트 클릭 시 알림 표시
                        alert('Event: ' + info.event.title + '\nStart: ' + info.event.start.toISOString() + '\nEnd: ' + info.event.end.toISOString() + '\nQuantity: ' + info.event.extendedProps.quantity);
                    }
                });

                calendarMini.render();
            });
        </script>
    </th:block>
</th:block>
